function redPack(a) {
	this.el = a.el;
	this.rains = [];
	this.speed = a.speed;
	this.density = a.density;
	this.callback = a.callback
}
redPack.prototype.create = function(g, c) {
	var e = this.el,
		f = this,
		b = document.createElement("span"),
		a = true;
	b.setAttribute("redId", g);
	b.setAttribute("redAmount", c);
	b.className = "redpack";
	b.style.left = Math.random() * (e.clientWidth - 30) + "px";
	b.style.top = -e.clientHeight / 10 + "px";
	var d = function() {
		if(a === true) {
			var h = b;
			b.className = "redpack redpacked";
			f.callback(h);
			a = false
		} else {
			return
		}
	};
	b.addEventListener("click", d, false);
	e.appendChild(b);
	this.move(b);
	this.rains.push(b)
};
redPack.prototype.start = function(c) {
	var b = this;
	var a = 0;
	b.timer = setInterval(function() {
		if(a <= c.length - 1) {
			var e = c[a].id,
				d = c[a].amount;
			b.create(e, d);
			a++
		}
	}, b.density)
};
redPack.prototype.stop = function() {
	var b = this;
	clearInterval(b.timer);
	for(var a = 0; a < b.rains.length; a++) {
		clearInterval(b.rains[a].timer)
	}
};
redPack.prototype.move = function(a) {
	var d = this.el;
	var e = this;
	var b = Math.random() + 1;
	var c = Math.random();
	a.timer = setInterval(function() {
		if(b > 1.5) {
			a.style.left = parseInt(a.style.left) + parseInt(c * a.clientHeight / 30) + "px"
		} else {
			a.style.left = parseInt(a.style.left) - parseInt(c * a.clientHeight / 30) + "px"
		}
		a.style.top = parseInt(a.style.top) + parseInt(b * a.clientHeight / 20) + "px";
		if(d.clientHeight < parseInt(a.style.top)) {
			clearInterval(a.timer);
			d.removeChild(a)
		}
	}, e.speed)
};
redPack.prototype.clear = function() {
	var b = document.getElementById("box"),
		a = b.childNodes;
	for(var c = a.length - 1; c >= 0; c--) {
		b.removeChild(a[c])
	}
};
redPack.prototype.ajax = function(d) {
	d = d || {};
	d.method = (d.method == null ? "GET" : d.method.toUpperCase());
	d.url = d.url || "";
	d.async = d.async || true;
	d.data = d.data || null;
	d.success = d.success || function() {};
	var b = null;
	if(XMLHttpRequest) {
		b = new XMLHttpRequest()
	} else {
		b = new ActiveXObject("Microsoft.XMLHTTP")
	}
	var e = [];
	for(var c in d.data) {
		e.push(c + "=" + d.data[c])
	}
	var a = e.join("&");
	if(d.method.toUpperCase() === "POST") {
		b.open(d.method, d.url, d.async);
		b.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=utf-8");
		b.send(a)
	} else {
		if(d.method.toUpperCase() === "GET") {
			b.open(d.method, d.url + "?" + a, d.async);
			b.send(null)
		}
	}
	b.onreadystatechange = function() {
		if(b.readyState == 4 && b.status == 200) {
			d.success(b.responseText)
		}
	}
};